+++
title = "Metadata"
date = 2024-01-17T08:51:13+08:00
weight = 120
type = "docs"
description = ""
isCJKLanguage = true
draft = false
+++

> 原文: [https://grpc.io/docs/guides/metadata/](https://grpc.io/docs/guides/metadata/)

# Metadata 元数据

Explains what metadata is, how it is transmitted, and what it is used for.

​	说明元数据是什么、如何传输以及用于什么。



### Overview 概述

Metadata is a side channel that allows clients and servers to provide information to each other that is associated with an RPC.

​	元数据是一个旁路通道，允许客户端和服务器向彼此提供与 RPC 关联的信息。

gRPC metadata is a key-value pair of data that is sent with initial or final gRPC requests or responses. It is used to provide additional information about the call, such as authentication credentials, tracing information, or custom headers.

​	gRPC 元数据是与初始或最终 gRPC 请求或响应一起发送的数据的键值对。它用于提供有关调用的其他信息，例如身份验证凭据、跟踪信息或自定义标头。

gRPC metadata is implemented using HTTP/2 headers. The keys are ASCII strings, while the values can be either ASCII strings or binary data. The keys are case insensitive and must not start with the prefix `grpc-`, which is reserved for gRPC itself.

​	gRPC 元数据使用 HTTP/2 标头实现。键是 ASCII 字符串，而值可以是 ASCII 字符串或二进制数据。键不区分大小写，并且不得以前缀 `grpc-` 开头，该前缀专用于 gRPC 本身。

gRPC metadata can be sent and received by both the client and the server. Headers are sent from the client to the server before the initial request and from the server to the client before the initial response of an RPC call. Trailers are sent by the server when it closes an RPC.

​	gRPC 元数据可以由客户端和服务器发送和接收。标头在初始请求之前从客户端发送到服务器，在 RPC 调用的初始响应之前从服务器发送到客户端。预告片由服务器在关闭 RPC 时发送。

gRPC metadata is useful for a variety of purposes, such as:

​	gRPC 元数据可用于各种目的，例如：

- **Authentication**: gRPC metadata can be used to send authentication credentials to the server. This can be used to implement different authentication schemes, such as `OAuth2` or `JWT` using the standard HTTP Authorization header.
  身份验证：gRPC 元数据可用于向服务器发送身份验证凭据。这可用于实现不同的身份验证方案，例如使用标准 HTTP 授权标头的 `OAuth2` 或 `JWT` 。
- **Tracing**: gRPC metadata can be used to send tracing information to the server. This can be used to track the progress of a request through a distributed system.
  跟踪：gRPC 元数据可用于向服务器发送跟踪信息。这可用于跟踪请求在分布式系统中的进度。
- **Custom headers**: gRPC metadata can be used to send custom headers to the server or from the server to the client. This can be used to implement application-specific features, such as load balancing, rate limiting or providing detailed error messages from the server to the client.
  自定义标头：gRPC 元数据可用于向服务器或从服务器向客户端发送自定义标头。这可用于实现特定于应用程序的功能，例如负载平衡、速率限制或从服务器向客户端提供详细的错误消息。
- **Internal usages**: gRPC uses HTTP/2 headers and trailers, which will be integrated with the metadata specified by your application.
  内部用法：gRPC 使用 HTTP/2 标头和尾部，这些标头和尾部将与应用程序指定的元数据集成。

See [Concepts guide](https://grpc.io/docs/guides/concepts.html#metadata) 
​	请参阅概念指南

#### Be Aware 请注意

```
WARNING: Servers may limit the size of Request-Headers, with a default of 8 KiB suggested.
```

Custom metadata must follow the “Custom-Metadata” format listed in [PROTOCOL-HTTP2](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md) , with the exception of binary headers not needing to be base64 encoded.

​	自定义元数据必须遵循 PROTOCOL-HTTP2 中列出的“Custom-Metadata”格式，但无需对二进制标头进行 base64 编码。

#### Headers 标头

Headers are sent before the initial request data message from the client to the server and similarly before the initial response data from the server to the client. The header includes things like authentication credentials and how to handle the RPC. Some of the headers, such as authorization, are generated by gRPC for you.

​	标头在初始请求数据消息从客户端发送到服务器之前发送，同样在初始响应数据从服务器发送到客户端之前发送。标头包括诸如身份验证凭据以及如何处理 RPC 之类的内容。某些标头（例如授权）由 gRPC 自动生成。

Custom header handling is language dependent, generally through interceptors.

​	自定义标头处理取决于语言，通常通过拦截器进行。

#### Trailers 尾部

Trailers are a special kind of header that is sent after the message data. They are used internally to communicate the outcome of an RPC. At the application level, custom trailers can be used to communicate things not directly part of the data, such as server utilization and query cost. Trailers are sent only by the server.

​	预告片是一种在消息数据之后发送的特殊类型的标头。它们在内部用于传达 RPC 的结果。在应用程序级别，自定义预告片可用于传达不直接属于数据的一部分的内容，例如服务器利用率和查询成本。预告片仅由服务器发送。

### For more details, please see the following gRPCs 有关更多详细信息，请参阅以下 gRPC：G1 真正的二进制元数据

- [proposal: G1 true binary metadata
  提议：L7 go 元数据 api](https://github.com/grpc/proposal/blob/7c05212d14f4abef5f74f71695f95ba8dd3f7dd3/G1-true-binary-metadata.md)
- [proposal: L7 go metadata api
  提议：L48 节点元数据选项](https://github.com/grpc/proposal/blob/7c05212d14f4abef5f74f71695f95ba8dd3f7dd3/L7-go-metadata-api.md)
- [proposal: L48 node metadata options
  提议：L42 python 元数据标志](https://github.com/grpc/proposal/blob/7c05212d14f4abef5f74f71695f95ba8dd3f7dd3/L48-node-metadata-options.md)
- [proposal: L42 python metadata flags
  提议：L11 ruby 拦截器](https://github.com/grpc/proposal/blob/7c05212d14f4abef5f74f71695f95ba8dd3f7dd3/L42-python-metadata-flags.md)
- [proposal: L11 ruby interceptors
  示例](https://github.com/grpc/proposal/blob/7c05212d14f4abef5f74f71695f95ba8dd3f7dd3/L11-ruby-interceptors.md)

### Language Support 语言支持

| Language 语言 | Examples Java 标头                                           | Notes 备注                                                   |
| ------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Java          | [Java Header Java 错误处理](https://github.com/grpc/grpc-java/tree/master/examples/src/main/java/io/grpc/examples/header) [Java Error Handling](https://github.com/grpc/grpc-java/tree/master/examples/src/main/java/io/grpc/examples/errorhandling) |                                                              |
| Go            | [Go Metadata Go 元数据](https://github.com/grpc/grpc-go/tree/master/examples/features/metadata) [Go Metadata Interceptor Go 元数据拦截器](https://github.com/grpc/grpc-go/tree/master/examples/features/metadata_interceptor) | [Go Documentation Go 文档](https://github.com/grpc/grpc-go/blob/master/Documentation/grpc-metadata.md) |
| C++           | [C++ Metadata C++ 元数据](https://github.com/grpc/grpc/tree/master/examples/cpp/metadata) |                                                              |
| Node          | [Node Metadata Node 元数据](https://github.com/grpc/grpc-node/tree/master/examples/metadata) |                                                              |
| Python        | [Python Metadata Python 元数据](https://github.com/grpc/grpc/tree/master/examples/python/metadata) |                                                              |
| Ruby          |                                                              | Example upcoming 示例即将推出                                |
